= tdd in javascript:

link:Refactoring-A-First-Example.pdf[Martin Fowler Movie Example (2nd ed.)]

.*objectives:*
- learn the fundamental refactorings used every day in practice
- understand what it means to _refactor safely_
- learn the value of an automated suite of unit tests
- reinforce membership in the _limited red society_
- follow the steps in link:Refactoring-A-First-Example.pdf[Martin Fowler Movie Example (2nd ed.)]
** extract `switch statement`
** rename `thisAmount`
** rename `perf`
** remove `play` parameter
*** extract `playFor(performance)`
*** inline `play` in `playFor(performance)`
*** inline `play` in `statement(invoice, plays)`
*** change signature to remove `play` parameter in `amountFor(performance, play)`
**** calculate `play` from `performance` in `amountFor` using `playFor(performance)`
**** change signature to remove `play` from `amountFor`
** inline `thisAmount`
** extract `volumeCreditsFor(performance)`
** replace `format` constant with `function format(number)`
** rename `format` to `usd`
** extract `volumeCredits()`
*** isolate `volumeCredits` calculations in its own loop
*** move `volumeCredits` variable adjacent to calculation
*** replace `volumeCredits` with `totalVolumeCredits()`
*** inline `volumeCredits`
** extract `totalAmount()`
** extract the code that produces output to `renderPlainText`
** change signature to make parameter order consistent
** introduce a `config` parameter
** put `invoice.customer` on the config and use it in `renderPlainText`
** to remove the `invoice` parameter on `renderPlainText`
*** put `invoice.performances` on the config and use it in `renderPlainText`
*** remove the `invoice` parameter
** map over the `invoice.performances` array to configure the individual `performance` items
*** create a shallow clone of each `performance` item
*** install the play on each `performance` item
*** use `performance.play` in `renderPlainText`
** put `amount` on the `performance` clone and use in `renderPlainText`
** put `volumeCredits` on the `performance` clone and use in `renderPlainText`
** install `totalVolumeCredits` and `totalAmount` on the `config`
** refine summations for totals with `reduce`
** extract a `configure` function
** inline `configure`
** move `configure` to file system
